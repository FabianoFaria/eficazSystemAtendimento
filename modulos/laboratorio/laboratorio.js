$(document).ready(function(){	paginaAtual = window.location.href.replace("#","");	if ($("#slug-pagina").val()=="laboratorio-materiais-analise"){		$(".botao-pesquisar-laboratorio").live('click', function () {			$("#frmDefault").attr("action",caminhoScript+"/laboratorio/laboratorio-materiais-analise");			$("#frmDefault").submit();		});		$(".laboratorio-inc-alt").live('click', function () {			$("#lab-prod-id").val($(this).attr("lab-prod-id"));			$("#frmDefault").attr("action",caminhoScript+"/laboratorio/laboratorio-material-analise");			$("#frmDefault").submit();		});		$(document).keypress(function(event) {if(event.keyCode==13){ $(".botao-pesquisar-laboratorio").click(); }});	}	if ($("#slug-pagina").val()=="laboratorio-material-analise"){		$(".laboratorio-salvar").live('click', function () {			if (validarCamposGenerico(".required")){				$("#frmDefault").attr("action",caminhoScript+"/modulos/laboratorio/laboratorio-material-analise-salvar.php");				$("#frmDefault").submit();			}		});		/* FUNCAO INCLUI ABA DOCUMENTOS E ANEXOS */		$("#menu-superior-3").live('click', function () {			carregarDocumentos($("#workflow-id").val(),'chamados');		});		$(".lab-inc-alt-mat, .btn-editar-material").live('click', function () {			alvo = $(this).attr('alvo');			labMatID = $(this).attr('lab-mat-id');
			tipo = $(this).attr('tipo');
			$("." + alvo).html("<p align='center' style='width:100%'>Aguarde processando</p><p align='center' style='width:100%' class='barra-carregando'>&nbsp;</p>").show();			caminho = caminhoScript+"/modulos/laboratorio/laboratorio-incluir-editar-materia-prima.php?alvo="+alvo+"&lab-mat-id="+labMatID+"&tipo="+tipo;			$.ajax({type: "POST",url: caminho, data: $("form").serialize(), dataType: "html", contentType: "application/x-www-form-urlencoded;charset=UTF-8",				success: function(retorno){					$("." + alvo).show().html(retorno);				}			});		});		$(".botao-cancelar-mp").live('click', function () {			//$("." + alvo).html("<p align='center' style='width:100%'>Aguarde processando</p><p align='center' style='width:100%' class='barra-carregando'>&nbsp;</p>");			$("." + alvo).html("").hide();			tipo = $(this).attr('tipo');			carregarMateriais(tipo);		});		$(".botao-salvar-mp").live('click', function () {			salvarMaterialLaboratorio($(this));		});		$(".btn-excluir-material").live('click', function () {			excluirMaterialLaboratorio($(this).attr('lab-mat-id'), $(this).attr('tipo'));		});		/* EXIBINDO CAMPO DE DATA DE FINALIZAÇÃO */		exibirDataFinalizado();		$("#lab-status").live('change', function () {			exibirDataFinalizado();			carregarDataFinalizado();		});		/* IMPRESSÃO DE SOLICITAÇÕES DE MATERIAL */		$(".btn-imprimir-solicitacoes").live('click', function () {			dados = $('#frmDefault').serialize();			caminho = caminhoScript+"/modulos/laboratorio/laboratorio-imprimir-solicitacoes.php?"+dados;			$.fancybox.open({				href : caminho,				type : 'iframe',				width: '90%',				padding : 2,				afterClose : function(){					//carregarFormularios();				},				/*				afterShow: function () {					window.print();				}				*/			});		});		$(".imp-sol").live('change', function () {			if ($(".imp-sol").is(':checked')==true){				$('.btn-imprimir-solicitacoes').show();			}			else{				$('.btn-imprimir-solicitacoes').hide();			}		});				$(".select-materia-prima").live('change', function () {			tipo = $(this).attr('tipo');			id = $(this).val();			if ($(this).val()==""){				$('.bloco-estoque-'+tipo).html('');			}			else{				caminho = caminhoScript+"/modulos/laboratorio/laboratorio-carregar-produto-estoque.php?produto-variacao-id="+id;				$.ajax({type: "GET",url: caminho, dataType: "html", contentType: "application/x-www-form-urlencoded;charset=UTF-8",					success: function(retorno){						$('.bloco-estoque-'+tipo).html(retorno);					}				});			}		});		
	}	if ($("#slug-pagina").val()=="laboratorio-controle-materia-prima"){		$(".seleciona-todas-aprovar").live('click', function () {			$(".produto-aprovar").click();			//$(".produto-aprovar").attr('checked',true);			//$(".produto-cancelar").attr('checked',false);			$(".executar-movimentacao").show();		});		$(".seleciona-todas-cancelar").live('click', function () {			$(".produto-cancelar").click();			//$(".produto-cancelar").attr('checked',true);			//$(".produto-aprovar").attr('checked',false);			$(".executar-movimentacao").show();		});		$(".produto-aprovar").live('change', function () {			posicao = $(this).attr('posicao');			$("#produto-cancelar-"+posicao).attr('checked',false);			$(".executar-movimentacao " + ", .retira-estoque-mp-" + posicao).hide();			if (($(".produto-aprovar").is(':checked')==true) || ($(".produto-cancelar").is(':checked')==true)){				$(".executar-movimentacao").show();				if ($("#produto-aprovar-"+posicao).is(':checked')==true){					$(".retira-estoque-mp-" + posicao).show();				}			}		});		$(".produto-cancelar").live('change', function () {			posicao = $(this).attr('posicao');			$("#produto-aprovar-"+posicao).attr('checked',false);			$(".executar-movimentacao " + ", .retira-estoque-mp-" + posicao).hide();			if (($(".produto-aprovar").is(':checked')==true) || ($(".produto-cancelar").is(':checked')==true)){				$(".executar-movimentacao").show();				if ($("#produto-aprovar-"+posicao).is(':checked')==true){					$(".retira-estoque-mp-" + posicao).show();				}			}		});		$(".executar-movimentacao").live('click', function () {			caminho = caminhoScript+"/modulos/laboratorio/laboratorio-controle-materia-prima-executar.php";			$('#frmDefault').attr('action',caminho).submit();		});		$(".botao-pesquisar-laboratorio").live('click', function () {			$("#frmDefault").attr("action",caminhoScript+"/laboratorio/laboratorio-controle-materia-prima");			$("#frmDefault").submit();		});		$(".laboratorio-inc-alt").live('click', function () {			$("#lab-prod-id").val($(this).attr("lab-prod-id"));			$("#frmDefault").attr("action",caminhoScript+"/laboratorio/laboratorio-material-analise");			$("#frmDefault").submit();		});		$(document).keypress(function(event) {if(event.keyCode==13){ $(".botao-pesquisar-laboratorio").click(); }});	}	function exibirDataFinalizado(){		$(".div-data-finalizado, .div-destino").hide();		$(".div-situacao").css('width','100%');		if ($("#lab-status").val()=="132"){			$("#lab-data-finalizado, #cd-id").addClass('required');			$(".div-data-finalizado").css('width','25%').show();			$(".div-destino").css('width','25%').show();			$(".div-situacao").css('width','50%');		}		if ($("#lab-status").val()=="133"){			$("#lab-data-finalizado").addClass('required');			$(".div-data-finalizado").css('width','25%').show();			$(".div-situacao").css('width','75%');		}	}	function carregarDataFinalizado(){		if (($("#lab-status").val()=="132") || ($("#lab-status").val()=="133")){			caminho = caminhoScript+"/funcoes/carregar-data-atual.php?tipo=d&formato=d/m/Y H:i";			$.ajax({type: "GET",url: caminho, dataType: "html", contentType: "application/x-www-form-urlencoded;charset=UTF-8",				success: function(retorno){					$("#lab-data-finalizado").val(retorno);				}			});		}		else{			$("#lab-data-finalizado").val("");		}	}	function carregarMateriais(tipo){		caminho = caminhoScript+"/modulos/laboratorio/laboratorio-carregar-materiais-utilizado.php?tipo="+tipo;		$.ajax({type: "POST",url: caminho, data: $("form").serialize(), dataType: "html", contentType: "application/x-www-form-urlencoded;charset=UTF-8",			success: function(retorno){				$(".bloco-materiais-"+tipo).show().html(retorno);			}		});	}	function salvarMaterialLaboratorio(objeto){		labMatID = objeto.attr('lab-mat-id');		alvo = objeto.attr('alvo');
		tipo = objeto.attr('tipo');
		if(validarCamposGenerico('#bloco-altera-inclui-mp .required')){			dadosForm = $("form").serialize();			//$("." + $(this).attr('alvo')).hide();			$("." + alvo).html("<p align='center' style='width:100%'>Aguarde processando</p><p align='center' style='width:100%' class='barra-carregando'>&nbsp;</p>").show();			caminho = caminhoScript+"/modulos/laboratorio/laboratorio-salvar-material-utilizado.php?lab-mat-id="+labMatID+'&tipo='+tipo;			$.ajax({type: "POST",url: caminho, data: dadosForm, dataType: "html", contentType: "application/x-www-form-urlencoded;charset=UTF-8",				success: function(retorno){					$("." + alvo).hide();					carregarMateriais(tipo);
				}			});		}	}	function excluirMaterialLaboratorio(labMatID, tipo){		if (confirm('Tem certeza que deseja excluir o material?')){			caminho = caminhoScript+"/modulos/laboratorio/laboratorio-excluir-material-utilizado.php?lab-mat-id="+labMatID+'&tipo='+tipo;			$.ajax({type: "POST",url: caminho, data: $("form").serialize(), dataType: "html", contentType: "application/x-www-form-urlencoded;charset=UTF-8",				success: function(retorno){					carregarMateriais(tipo);				}			});		}	}});